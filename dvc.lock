schema: '2.0'
stages:
  expand:
    cmd: bash expand_data.sh
    deps:
    - path: Export-d3adfe0f-3131-4bf3-8987-a52017fc1bae.zip
      hash: md5
      md5: a244a59409b0e27ea8196d7201ddd0f5
      size: 23674456
    - path: expand_data.sh
      hash: md5
      md5: 1e8b49cb52abb0dcd4ad885b41211e38
      size: 96
    outs:
    - path: Notion_DB
      hash: md5
      md5: 77e3da1ad7dbfdcdb22d049300fcb321.dir
      size: 27444961
      nfiles: 98
  ingest:
    cmd: python ingest.py
    deps:
    - path: Notion_DB
      hash: md5
      md5: 77e3da1ad7dbfdcdb22d049300fcb321.dir
      size: 27444961
      nfiles: 98
    - path: ingest.py
      hash: md5
      md5: c23ee88d05c671f67cc6744b9bcdd704
      size: 1255
    params:
      params.yaml:
        TextSplitter:
          chunk_size: 1500
          chunk_overlap: 200
          keep_separator: false
          add_start_index: false
    outs:
    - path: docs.json
      hash: md5
      md5: 3082174a1ef5c6b2d2733c7950aa7bf8
      size: 249826
    - path: metadatas.json
      hash: md5
      md5: 337d90985bc3fccca57097b12f43e770
      size: 33434
  vectorize:
    cmd: python vector_store.py
    deps:
    - path: docs.json
      hash: md5
      md5: 3082174a1ef5c6b2d2733c7950aa7bf8
      size: 249826
    - path: metadatas.json
      hash: md5
      md5: 337d90985bc3fccca57097b12f43e770
      size: 33434
    - path: vector_store.py
      hash: md5
      md5: 73df04619c4785d816ac11db2fef04b7
      size: 912
    params:
      params.yaml:
        OpenAIEmbeddings:
          chunk_size: 1000
          embedding_ctx_length: 8191
          max_retries: 6
          model: text-embedding-ada-002
    outs:
    - path: docs.index
      hash: md5
      md5: db44779c6213ed183152114b13422bb3
      size: 1210413
    - path: faiss_store.pkl
      hash: md5
      md5: 1d352e7dd19b25e2c5177a76b9c5a170
      size: 298993
  run:
    cmd: python qa.py
    deps:
    - path: docs.index
      hash: md5
      md5: db44779c6213ed183152114b13422bb3
      size: 1210413
    - path: faiss_store.pkl
      hash: md5
      md5: 1d352e7dd19b25e2c5177a76b9c5a170
      size: 298993
    - path: qa.py
      hash: md5
      md5: b4d48ec551952f9387b60c8b5409c779
      size: 1610
    - path: samples.txt
      hash: md5
      md5: 941115ecc22c947f1a1dfe19d3f30eed
      size: 229
    params:
      params.yaml:
        ChatOpenAI:
          max_retries: 6
          model_name: gpt-3.5-turbo
          temperature: 0.0
          verbose: true
        Retrieval:
          max_tokens_limit: 3375
          reduce_k_below_max_tokens: false
          verbose: true
    outs:
    - path: results.csv
      hash: md5
      md5: e3a234ec7569ff00881c7fa8466645d9
      size: 2992
